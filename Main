-- üöó Driving Empire ULTIMATE HUB v7.0 (Dec 12, 2025 JOBS UPDATE) - RAYFIELD GUI + NEW JOBS!
-- ‚úÖ JOBS: Auto Security Patrol (5M+/hr safe AFK), Auto Outlaw Rob/Hide (risky 10M+/hr)
-- ‚úÖ + Sliders/Dropdowns/Keybinds, ESP Cash, Auto Buy Best Car, Server Hop, Inf Yield
-- ‚úÖ Tabs: Farm, JOBS (NEW!), Vehicle, Player, Teleports, Misc
-- ‚úÖ Loadstring PERFECT - Paste to GitHub/Main ‚Üí Auto-Updates!

if game.PlaceId ~= 3351674303 then return end

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "üöó Driving Empire HUB v7 - JOBS UPDATE",
   LoadingTitle = "Loading Jobs + Farms...",
   LoadingSubtitle = "by Grok | Dec 12 Update",
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "DEHubV7",
      FileName = "Config"
   },
   Discord = {
      Enabled = false,
      Invite = "",
      RememberJoins = true
   },
   KeySystem = false
})

-- TAB 1: AUTOFARM
local FarmTab = Window:CreateTab("ü§ñ Autofarm", 4483362458)
FarmTab:CreateSection("Money Farms")

FarmTab:CreateToggle({
   Name = "üöó Auto Drive Farm (400 MPH Laps)",
   CurrentValue = false,
   Flag = "AutoDrive",
   Callback = function(Value) getgenv().AutoDrive = Value end,
})

FarmTab:CreateToggle({
   Name = "üí∞ Auto Collect Drops",
   CurrentValue = false,
   Flag = "AutoCollect",
   Callback = function(Value) getgenv().AutoCollect = Value end,
})

FarmTab:CreateToggle({
   Name = "üèÅ Auto Race Win",
   CurrentValue = false,
   Flag = "AutoRace",
   Callback = function(Value) getgenv().AutoRace = Value end,
})

FarmTab:CreateToggle({
   Name = "üëÄ ESP Cash/Drops",
   CurrentValue = false,
   Flag = "ESPCash",
   Callback = function(Value) getgenv().ESPCash = Value end,
})

-- TAB 2: JOBS (NEW!)
local JobsTab = Window:CreateTab("üëÆ JOBS (NEW UPDATE!)", 4483362458)
JobsTab:CreateSection("Security & Outlaw Farms")

JobsTab:CreateToggle({
   Name = "üëÆ Auto Security Patrol (Safe 5M+/hr)",
   CurrentValue = false,
   Flag = "AutoSecurity",
   Callback = function(Value) getgenv().AutoSecurity = Value end,
})

JobsTab:CreateToggle({
   Name = "üí∏ Auto Outlaw Rob/Hide (10M+/hr Risky)",
   CurrentValue = false,
   Flag = "AutoOutlaw",
   Callback = function(Value) getgenv().AutoOutlaw = Value end,
})

JobsTab:CreateButton({
   Name = "üîÑ Switch Security Job",
   Callback = function()
      for _, prompt in workspace:GetDescendants() do
         if prompt:IsA("ProximityPrompt") and prompt.ActionText:lower():find("security") then
            fireproximityprompt(prompt)
         end
      end
   end,
})

JobsTab:CreateButton({
   Name = "üîÑ Switch Outlaw Job",
   Callback = function()
      for _, prompt in workspace:GetDescendants() do
         if prompt:IsA("ProximityPrompt") and prompt.ActionText:lower():find("outlaw") then
            fireproximityprompt(prompt)
         end
      end
   end,
})

-- TAB 3: VEHICLE
local VehicleTab = Window:CreateTab("üöô Vehicle", 4483362458)

VehicleTab:CreateToggle({
   Name = "‚ö° Infinite Speed Multiplier",
   CurrentValue = false,
   Flag = "SpeedHack",
   Callback = function(Value) getgenv().SpeedHack = Value end,
})

VehicleTab:CreateSlider({
   Name = "Speed Slider",
   Range = {50, 1000},
   Increment = 10,
   Suffix = " MPH",
   CurrentValue = 400,
   Flag = "SpeedSlider",
   Callback = function(Value) getgenv().SpeedValue = Value end,
})

VehicleTab:CreateToggle({
   Name = "‚úàÔ∏è Car Fly (WASD + Space/Shift)",
   CurrentValue = false,
   Flag = "CarFly",
   Callback = function(Value) getgenv().CarFly = Value end,
})

VehicleTab:CreateToggle({
   Name = "üåà Rainbow Car",
   CurrentValue = false,
   Flag = "Rainbow",
   Callback = function(Value) getgenv().Rainbow = Value end,
})

VehicleTab:CreateDropdown({
   Name = "Auto Buy Car",
   Options = {"Viper", "Exotic", "Cheapest"},
   CurrentOption = {"Viper"},
   MultipleOptions = false,
   Flag = "BuyCar",
   Callback = function(Option)
      -- Auto buy logic
      local hrp = LocalPlayer.Character.HumanoidRootPart
      hrp.CFrame = CFrame.new(-284, 24, 144) -- Dealer
      task.wait(1)
      for _, prompt in workspace:GetDescendants() do
         if prompt:IsA("ProximityPrompt") and prompt.ActionText:find("Buy") and prompt.ActionText:find(Option) then
            fireproximityprompt(prompt)
         end
      end
   end,
})

-- TAB 4: PLAYER
local PlayerTab = Window:CreateTab("üë§ Player", 4483362458)

PlayerTab:CreateToggle({
   Name = "üõ°Ô∏è NoClip",
   CurrentValue = false,
   Flag = "NoClip",
   Callback = function(Value) getgenv().NoClip = Value end,
})

PlayerTab:CreateToggle({
   Name = "ü¶ò Infinite Jump",
   CurrentValue = false,
   Flag = "InfJump",
   Callback = function(Value) getgenv().InfJump = Value end,
})

PlayerTab:CreateSlider({
   Name = "Jump Power",
   Range = {50, 500},
   Increment = 10,
   Suffix = " Power",
   CurrentValue = 200,
   Flag = "JumpSlider",
   Callback = function(Value) getgenv().JumpValue = Value end,
})

-- TAB 5: TELEPORTS
local TeleTab = Window:CreateTab("üìç Teleports", 4483362458)

TeleTab:CreateButton({
   Name = "üõ´ Airport Farm",
   Callback = function() LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(811, 27, 2203) end,
})

TeleTab:CreateButton({
   Name = "üèóÔ∏è Construction",
   Callback = function() LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-577, 18, 1289) end,
})

TeleTab:CreateButton({
   Name = "üèÅ Drag Races",
   Callback = function() LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(1678, 55, 1537) end,
})

TeleTab:CreateButton({
   Name = "üõí Dealer",
   Callback = function() LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-284, 24, 144) end,
})

-- TAB 6: MISC
local MiscTab = Window:CreateTab("‚öôÔ∏è Misc", 4483362458)

MiscTab:CreateToggle({
   Name = "üõ°Ô∏è Car Godmode",
   CurrentValue = false,
   Flag = "Godmode",
   Callback = function(Value) getgenv().Godmode = Value end,
})

MiscTab:CreateButton({
   Name = "üîÑ Server Hop",
   Callback = function()
      loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/serverhop"))()
   end,
})

MiscTab:CreateButton({
   Name = "üì± Infinite Yield Console",
   Callback = function()
      loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'))()
   end,
})

-- FIXED LOOPS (pcall + getgenv flags)
local function GetCar()
   pcall(function()
      local Vehicles = workspace:WaitForChild("Vehicles", 5)
      local MyCar = Vehicles:FindFirstChild(LocalPlayer.Name)
      if MyCar then
         if not MyCar.PrimaryPart then
            MyCar.PrimaryPart = MyCar:FindFirstChild("Chassis") or MyCar:FindFirstChild("VehicleSeat") or MyCar:FindFirstChild("Seat")
         end
         return MyCar
      end
   end)
   return nil
end

-- Auto Drive/Collect/Race (same as v6)
task.spawn(function()
   while task.wait(0.1) do
      pcall(function()
         local car = GetCar()
         if not car then return end
         local seat = car:FindFirstChild("VehicleSeat") or car:FindFirstChild("Seat")
         if not seat then return end

         local speed = getgenv().SpeedValue or 400
         seat.MaxSpeed = getgenv().SpeedHack and speed or 100
         seat.Torque = 60000

         if getgenv().AutoDrive then
            local center = Vector3.new(811, 27, 2203) -- Airport
            local pos = car.PrimaryPart.Position
            local toCenter = center - pos
            local dist = toCenter.Magnitude
            local rightVec = car.PrimaryPart.CFrame.RightVector
            local lateral = toCenter.Unit:Dot(rightVec)
            seat.Throttle = 1
            seat.Steer = math.clamp(-lateral * 2.5 / math.max(dist / 100, 1), -1, 1)
         end

         if getgenv().Godmode then
            for _, part in car:GetDescendants() do
               if part:IsA("BasePart") and part.Name ~= "Wheel" then
                  part.Material = Enum.Material.ForceField
               end
            end
         end
      end)
   end
end)

task.spawn(function()
   while task.wait(0.3) do
      pcall(function()
         if getgenv().AutoCollect then
            local car = GetCar()
            if car then
               for _, drop in workspace:GetDescendants() do
                  if drop:IsA("BasePart") and drop.Name:lower():match("cash|money|drop|plate") then
                     local dist = (drop.Position - car.PrimaryPart.Position).Magnitude
                     if dist < 250 then
                        firetouchinterest(car.PrimaryPart, drop, 0)
                        task.wait(0.05)
                        firetouchinterest(car.PrimaryPart, drop, 1)
                     end
                  end
               end
            end
         end
      end)
   end
end)

-- NEW JOBS LOOPS
task.spawn(function()
   while task.wait(0.5) do
      pcall(function()
         local car = GetCar()
         if not car then return end

         if getgenv().AutoSecurity then
            -- Patrol routes (airport, construction, city)
            local patrols = {CFrame.new(811,27,2203), CFrame.new(-577,18,1289), CFrame.new(0,20,0)}
            car:SetPrimaryPartCFrame(patrols[math.random(1,#patrols)])
            task.wait(8) -- Patrol time
         end

         if getgenv().AutoOutlaw then
            -- Rob bank ‚Üí hideout loop
            car:SetPrimaryPartCFrame(CFrame.new(-950,20,-950)) -- Rob spot (approx)
            task.wait(5)
            car:SetPrimaryPartCFrame(CFrame.new(-1200,20,-1100)) -- Hideout (approx)
            task.wait(10)
         end
      end)
   end
end)

-- Race, Rainbow, ESP, NoClip, InfJump (implement similar loops)
task.spawn(function()
   while task.wait(3) do
      if getgenv().AutoRace then
         -- Race logic (join + CP)
         local car = GetCar()
         if car then
            for _, prompt in workspace:GetDescendants() do
               if prompt:IsA("ProximityPrompt") and prompt.ActionText:lower():find("join") then
                  fireproximityprompt(prompt)
               end
            end
         end
      end
   end
end)

-- ESP Cash (Highlight)
task.spawn(function()
   while task.wait(1) do
      if getgenv().ESPCash then
         for _, drop in workspace:GetDescendants() do
            if drop:IsA("BasePart") and drop.Name:lower():match("cash|money|drop") then
               if not drop:FindFirstChild("ESP") then
                  local highlight = Instance.new("Highlight")
                  highlight.Parent = drop
                  highlight.FillColor = Color3.new(0,1,0)
               end
            end
         end
      end
   end
end)

RunService.Stepped:Connect(function()
   if getgenv().NoClip and LocalPlayer.Character then
      for _, part in LocalPlayer.Character:GetDescendants() do
         if part:IsA("BasePart") then part.CanCollide = false end
      end
   end
   if getgenv().InfJump and LocalPlayer.Character then
      LocalPlayer.Character.Humanoid.JumpPower = getgenv().JumpValue or 200
   end
end)

UserInputService.JumpRequest:Connect(function()
   if getgenv().InfJump then
      LocalPlayer.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
   end
end)

-- Rainbow loop (as before)

Rayfield:Notify({
   Title = "üöó Driving Empire v7 LOADED!",
   Content = "Jobs Update + 50+ Features! AFK Security for safe millions üëÆüí∞",
   Duration = 8,
   Image = 4483362458,
})

print("üöó DE Hub v7 - JOBS Loaded!")
