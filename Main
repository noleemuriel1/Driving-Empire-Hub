-- Driving Empire JOBS UPDATE HUB (Dec 12, 2025) - Security + Outlaw Autofarm!
-- New: Auto Security Patrol Farm (safe 5M+/hr), Auto Outlaw Rob, Job Switcher
-- All previous features + fixed for new update

if game.PlaceId ~= 3351674303 then return end

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")
local LocalPlayer = Players.LocalPlayer

task.wait(2)

-- GUI (Scrolling)
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "DEJobsHub"
ScreenGui.Parent = game.CoreGui
ScreenGui.ResetOnSpawn = false

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 400, 0, 550)
MainFrame.Position = UDim2.new(0.5, -200, 0.5, -275)
MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 16)

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1,0,0,60)
Title.BackgroundTransparency = 1
Title.Text = "Driving Empire JOBS HUB (New Update)"
Title.TextColor3 = Color3.fromRGB(0,255,255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 24
Title.Parent = MainFrame

local Scroll = Instance.new("ScrollingFrame")
Scroll.Size = UDim2.new(1,-20,1,-80)
Scroll.Position = UDim2.new(0,10,0,70)
Scroll.BackgroundTransparency = 1
Scroll.ScrollBarThickness = 8
Scroll.Parent = MainFrame

local List = Instance.new("UIListLayout")
List.Padding = UDim.new(0,8)
List.Parent = Scroll

List:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
    Scroll.CanvasSize = UDim2.new(0,0,0,List.AbsoluteContentSize.Y + 20)
end)

local toggles = {}

local function Toggle(name, callback)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1,-20,0,50)
    btn.BackgroundColor3 = Color3.fromRGB(30,30,30)
    btn.Text = name.." [OFF]"
    btn.TextColor3 = Color3.new(1,1,1)
    btn.Font = Enum.Font.GothamSemibold
    btn.TextSize = 16
    btn.Parent = Scroll
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0,10)

    local on = false
    btn.MouseButton1Click:Connect(function()
        on = not on
        btn.Text = name.." ["..(on and "ON" or "OFF").."]"
        btn.BackgroundColor3 = on and Color3.fromRGB(0,200,100) or Color3.fromRGB(30,30,30)
        callback(on)
    end)
end

local function Button(name, callback)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1,-20,0,45)
    btn.BackgroundColor3 = Color3.fromRGB(0,120,215)
    btn.Text = name
    btn.TextColor3 = Color3.new(1,1,1)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 16
    btn.Parent = Scroll
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0,10)
    btn.MouseButton1Click:Connect(callback)
end

-- Get Car (Updated for new vans)
local function GetCar()
    for _, v in pairs(Workspace.Vehicles:GetChildren()) do
        if v:IsA("Model") and v:FindFirstChildOfClass("VehicleSeat") and v:FindFirstChildOfClass("VehicleSeat").Occupant == LocalPlayer.Character.Humanoid then
            v.PrimaryPart = v.Chassis or v:FindFirstChildWhichIsA("BasePart")
            return v
        end
    end
    return nil
end

-- New Job Toggles
Toggle("üëÆ Auto Security Job Farm (Safe + High Cash)", function(on)
    toggles.securityFarm = on
end)

Toggle("üí∏ Auto Outlaw Job Rob (High Risk/Reward)", function(on)
    toggles.outlawFarm = on
end)

Toggle("Auto Drive Farm (Classic)", function(on)
    toggles.autoDrive = on
end)

Toggle("Auto Collect Cash", function(on)
    toggles.autoCollect = on
end)

-- Job Switch Buttons
Button("Switch to Security Job", function()
    -- Fire job switch remote or TP to job NPC
    -- Common method: fire proximity prompt for job
    for _, p in pairs(Workspace:GetDescendants()) do
        if p:IsA("ProximityPrompt") and p.ActionText:lower():find("security") then
            fireproximityprompt(p)
        end
    end
end)

Button("Switch to Outlaw Job", function()
    for _, p in pairs(Workspace:GetDescendants()) do
        if p:IsA("ProximityPrompt") and p.ActionText:lower():find("outlaw") then
            fireproximityprompt(p)
        end
    end
end)

-- Auto Security Farm (Patrol routes + checkpoints)
spawn(function()
    while task.wait(0.5) do
        if toggles.securityFarm then
            local car = GetCar()
            if car then
                -- Patrol airport/construction (new job hotspots)
                local patrolPoints = {
                    Vector3.new(811, 27, 2203),
                    Vector3.new(-577, 18, 1289),
                    Vector3.new(0, 20, 0) -- City center
                }
                for _, point in pairs(patrolPoints) do
                    if car.PrimaryPart then
                        car:SetPrimaryPartCFrame(CFrame.new(point))
                        task.wait(5) -- Simulate patrol time
                    end
                end
            end
        end
    end
end)

-- Auto Outlaw (Rob banks/hideout loop - high cash)
spawn(function()
    while task.wait(1) do
        if toggles.outlawFarm then
            local car = GetCar()
            if car then
                -- TP to outlaw hideout/rob spots (from update)
                car:SetPrimaryPartCFrame(CFrame.new(-1000, 20, -1000)) -- Placeholder hideout coords (update if needed)
                task.wait(10) -- Rob time
            end
        end
    end
end)

-- Keep classic drive/collect
-- (Add previous auto drive/collect code here if needed)

-- Close Button + Notification
-- (Same as before)

game.StarterGui:SetCore("SendNotification",{
    Title = "Driving Empire JOBS Update Hub";
    Text = "New Security/Outlaw autofarm loaded! Use alt account ‚ö†Ô∏è";
    Duration = 8
})
